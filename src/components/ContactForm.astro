---
const { postUrl = 'https://localhost', buttonText = 'Contact Me' } = Astro.props

---

    <!-- Author: FormBold Team -->
    <!-- Learn More: https://formbold.com -->

      <form action={postUrl} method="POST" class=".contact-form contact-form" id="contact-form">
        <div class="mb-5">
          <label
            for="name"
            class="mb-3 block text-base font-medium text-[#07074D]"
          >
            Full Name
          </label>
          <input
            type="text"
            name="name"
            id="name"
            placeholder="Full Name"
            class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium outline-none focus:border-[#6A64F1] focus:shadow-md"
            required
          />
        </div>
        <div class="mb-5">
          <label
            for="email"
            class="mb-3 block text-base font-medium text-[#07074D]"
          >
            Email Address
          </label>
          <input
            type="email"
            name="email"
            id="email"
            placeholder="example@domain.com"
            class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium outline-none focus:border-[#6A64F1] focus:shadow-md"
            required
            
          />
        </div>
        <div class="mb-5">
          <label
            for="subject"
            class="mb-3 block text-base font-medium text-[#07074D]"
          >
            Subject
          </label>
          <input
            type="text"
            name="subject"
            id="subject"
            placeholder="Enter your subject"
            class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium outline-none focus:border-[#6A64F1] focus:shadow-md"
          />
        </div>
        <div class="mb-5">
          <label
            for="message"
            class="mb-3 block text-base font-medium text-[#07074D]"
          >
            Message
          </label>
          <textarea
            rows="4"
            name="message"
            id="message"
            placeholder="Enter your message"
            class="w-full resize-none rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium outline-none focus:border-[#6A64F1] focus:shadow-md"
          ></textarea>
        </div>
        <div>
          <button
            class="contact-form__button transition-all hover:shadow-form rounded-md bg-[#223843] hover:bg-[#D77A61] py-3 px-8 text-base font-semibold text-white outline-none border-none"
          >
            {buttonText}
          </button>
        </div>
      </form>

      
<script>
  import JustValidate from 'just-validate';
  const validate = new JustValidate('.contact-form');      
  validate.addField(
    '#name',
    [
      {
        rule: 'required',
      },
    ],
    {
      //errorsContainer: '.errors',
    }
  ).addField(
    '#email',
    [
      {
        rule: 'required',
      },
      {
        rule: 'email',
      },
    ],
    {
      //errorsContainer: '.errors',
    }
  );
  
  console.log('contact form script loaded!')
  // Select all forms using a class or tag name
  const forms = document.querySelectorAll('.contact-form');

  // Iterate over each form and attach a submit event listener
  forms.forEach(form => {
    form.addEventListener('submit', function(event) {
      // Prevent the default form submission behavior
      event.preventDefault();

      // You can handle your form submission logic here
      // For example, you can get form data and send it to a server

      // Example: Logging the form's data
      const formData = new FormData(form);
      for (let [key, value] of formData.entries()) {
        console.log(`${key}: ${value}`);
      }

      // Or, you can submit the form data using AJAX, Fetch API, etc.
    });
  });

</script>

  <style lang="scss">

    :global(.just-validate-error-label) {
      border: 1px solid red;
      background: #e7b2b2;
      color: red;
      font-weight: bold;
      margin-top: 4px;
      font-size: 12px;
      padding: 4px;
      line-height: 1;
    }

    :global(.darkmode .contact-form__button) {
      background: var(--secondary-300);
      color: var(--neutral-100);
      margin: 0;
      border: 1px solid transparent !important;
      &:hover {
        color: var(--neutral-100);
        background: var(--primary-300);
      }
    }

    :global(.modal__content) .contact-form label {
      color: var(--neutral-900) !important;
    }

    .contact-form label, .contact-form input {
      color: var(--neutral-900);
    }

    :global(.darkmode .contact-form label) {
      color: var(--neutral-100) !important;
    }

    :global(.darkmode .contact-form input) {
      color: var(--neutral-900) !important;
    }
  </style>